#!/usr/bin/env python

import logging
from argparse import ArgumentParser

from videowall.players import PlayerPlatform
from videowall.server import Server

if __name__ == '__main__':
    parser = ArgumentParser()
    parser.add_argument('player_platform', type=PlayerPlatform, choices=list(PlayerPlatform))
    parser.add_argument('filename')
    parser.add_argument('--player_ip', default='127.0.0.1')
    parser.add_argument('--player_port', type=int, default=11111)
    parser.add_argument('--gui', action='store_true')
    parser.add_argument('--verbose', action='store_true')
    parser.add_argument('--broadcast_port', type=int, default=2000)
    parser.add_argument('--broadcast_interval', type=float, default=1.0)

    args = parser.parse_args()

    if args.verbose:
        logging.getLogger().setLevel(logging.DEBUG)

    Server(args.broadcast_port, args.broadcast_interval, args.player_platform, args.filename, args.player_ip,
           args.player_port, args.gui).run()
